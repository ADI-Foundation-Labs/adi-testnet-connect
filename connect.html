<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8" />
    <title>Add ADI Testnet</title>
    <script>
      async function addAdiTestnet() {
        if (!window.ethereum) return;

        try {
          await window.ethereum.request({
            method: 'wallet_addEthereumChain',
            params: [{
              chainId: '0x1869F',      // 99999 in hex
              chainName: 'ADI Network AB Testnet',
              nativeCurrency: {
                name: 'ADI',
                symbol: 'ADI',
                decimals: 18
              },
              rpcUrls: ['https://rpc.ab.testnet.adifoundation.ai/'],
              blockExplorerUrls: ['https://explorer.ab.testnet.adifoundation.ai/']
            }]
          });
        } catch (err) {
          console.error('Auto add failed', err);
        } finally {
          goBackToDocs();
        }
      }

      function goBackToDocs() {
        const params = new URLSearchParams(window.location.search);
        const explicitReturn = params.get('return');
        const fallback = document.referrer || 'https://docs.adi.foundation/';
        const target = explicitReturn || fallback;

        // Prefer history back if it exists; otherwise replace to avoid extra tab history.
        if (window.history.length > 1) {
          window.history.back();
        } else {
          window.location.replace(target);
        }
      }

      window.onload = addAdiTestnet;
    </script>
  </head>

  <body>
  </body>
</html>
