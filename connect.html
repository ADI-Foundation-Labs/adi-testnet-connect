<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8" />
    <title>Add ADI Testnet</title>
    <script>
      async function addAdiTestnet() {
        if (!window.ethereum) return;

        try {
          await window.ethereum.request({
            method: 'wallet_addEthereumChain',
            params: [{
              chainId: '0x1869F',      // 99999 in hex
              chainName: 'ADI Network AB Testnet',
              nativeCurrency: {
                name: 'ADI',
                symbol: 'ADI',
                decimals: 18
              },
              rpcUrls: ['https://rpc.ab.testnet.adifoundation.ai/'],
              blockExplorerUrls: ['https://explorer.ab.testnet.adifoundation.ai/']
            }]
          });
          closeIfPossible();
        } catch (err) {
          console.error('Auto add failed', err);
        }
      }

      function closeIfPossible() {
        // Works if the tab was opened by script; otherwise, best-effort notify parent iframe.
        if (window.top !== window.self) {
          try {
            window.parent.postMessage({ type: 'adi:add-network:done' }, '*');
          } catch (_) {}
          return;
        }
        window.close();
      }

      window.onload = addAdiTestnet;
    </script>
  </head>

  <body>
  </body>
</html>
